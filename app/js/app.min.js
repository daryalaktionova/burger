/* Overlay menu */

  
  let menu = (function(options) {

    let button = document.querySelector(options.button);
    let menu = document.querySelector(options.menu);
    let body = document.querySelector('body');
    let link = document.querySelectorAll(".overlay-menu__link");
    



    let _toggleMenu = function(e) {
      button.classList.toggle('hamburger-bar--active');
      menu.classList.toggle('overlay--open');
      body.classList.toggle('body-active-menu');
    }

    let addListeners = function() {
      button.addEventListener('click', _toggleMenu);
        for (i=0;i<link.length;i++){
          link[i].addEventListener('click', _toggleMenu);
        }
    }

    
    return {
        openMenu: addListeners
      };

  })({
    button: '#toggle',
    menu: '#overlay'
  });

  menu.openMenu();


/*end overlay menu */

/*Accodeon team*/
let teamAccordeon = (function() {

    let linkAccordeon = document.querySelectorAll('.accordeon__link');
    
    let forEachAccordeon = linkAccordeon.forEach(function(personName) {
    personName.addEventListener('click', function(e) {
          e.preventDefault();
          let activePerson = document.querySelector('.accordeon__item.accordeon__item--is-active');
          if(activePerson) {
            let teamAccordeonDetails = activePerson.querySelector('.accordeon-content');
            teamAccordeonDetails.style.height = "";
            activePerson.classList.remove('accordeon__item--is-active');
          }

          if(!activePerson || activePerson.linkAccordeon !== this) {
            let currentPerson = this.closest('.accordeon__item');
            currentPerson.classList.add('accordeon__item--is-active');
            let currentPersonInfo = currentPerson.querySelector('.accordeon-content');
            currentPersonInfo.style.height = currentPersonInfo.scrollHeight + 'px';
          }
        })
    })
  })

teamAccordeon();
/*end Accordeon team */

/* Start accordeon horizontal */
let menuAccordeon = (function() {

    let linkMenuAccordeon = document.querySelectorAll('.accordeon-menu__link');
    let userWidth = window.innerWidth;
    let list = document.querySelector('.accordeon-menu__list');
    let itemsList = list.querySelectorAll('.accordeon-menu__item');
		let titleItem = list.querySelector('.accordeon-menu__link');
		let widthTitle = titleItem.clientWidth;
		var neededWidth = userWidth - itemsList.length * widthTitle;
		neededWidth = (neededWidth > 520) ? '520px' : neededWidth + 'px';
    
    let forEachMenuAccordeon = linkMenuAccordeon.forEach(function(categoryName) {
    categoryName.addEventListener('click', function(e) {
          e.preventDefault();
          let activeCategory = document.querySelector('.accordeon-menu__item.accordeon-menu__item--is-active');
          if(activeCategory) {
            let menuAccordeonDetails = activeCategory.querySelector('.accordeon-menu__item-content');
            menuAccordeonDetails.style.width = "";
            activeCategory.classList.remove('accordeon-menu__item--is-active');
          }

          if(!activeCategory|| activeCategory.linkMenuAccordeon !== this) {
            let currentCategory = this.closest('.accordeon-menu__item');
            currentCategory.classList.add('accordeon-menu__item--is-active');
            let currentCategoryInfo = currentCategory.querySelector('.accordeon-menu__item-content');
            currentCategoryInfo.style.width = neededWidth;
          }
        })
    })
  })

menuAccordeon();

/*End accordeon horinzontal */



/* popup */
let popup = (function(options) {
	let wrapper = document.querySelector('.reviews__list');

	let _tooglePopup = (function(e) {
		e.preventDefault();

		if (e.target.className == options.button) {
			_openPopup(e.target);
		}
	});

	let _openPopup = (function(button){
		let overlay = document.createElement('div');
		overlay.classList.add('overlay');

		let popupWindow = document.createElement('div');
		popupWindow.classList.add('popup');

		let contentText = document.createElement('div');
		contentText.classList.add('popup__content');

		let content = button.parentNode;

		let text = content.querySelector(options.text).textContent;
	 

		let titleItem= document.createElement('div');
		titleItem.classList.add('popup__title');

    let title = content.querySelector(options.title).textContent;
    contentText.innerHTML = 'Ошибка отправки данных';
    contentText.innerHTML = text;
    titleItem.innerHTML = title;

		let closeIcon = document.createElement("a");
		closeIcon.classList.add("popup__close");
		closeIcon.innerHTML = '<svg class="popup__close-image"><use xlink:href="./images/icons/sprite.svg#close"></use></svg>';
		closeIcon.href = "#";
		closeIcon.addEventListener("click", (function(e){
			e.preventDefault();
			_closePopup(overlay);
		}));

		overlay.appendChild(popupWindow);
		popupWindow.appendChild(titleItem);
		popupWindow.appendChild(contentText);
		popupWindow.appendChild(closeIcon);

		document.body.appendChild(overlay);
	});

	let _closePopup = (function(overlay) {
		document.body.removeChild(overlay);
	});

	let addListeners = (function() {
		wrapper.addEventListener('click', _tooglePopup)
	});

	return {
		init: addListeners
	}
});

popup({
	button: "reviews__button",
	title: ".reviews__title",
	text: ".reviews__text"
}).init();


/* end popup */

/* form*/

let formFunction = (function(options) {

  const myForm = document.querySelector('#myForm');
  const send = document.querySelector('#send');
  const data = {
    name: myForm.elements.name.value,
    phone: myForm.elements.phone.value,
    comment: myForm.elements.comment.value,
    to: "segezmundovna@gmail.com"
  };

	let _ajaxInquiry = (function(e){
    e.preventDefault();
		let overlay = document.createElement('div');
		overlay.classList.add('overlay');
		let popupWindow = document.createElement('div');
		popupWindow.classList.add('popup--form');
		let contentText = document.createElement('div');
		contentText.classList.add('popup__content');

    const xhr = new XMLHttpRequest();
    xhr.responseType = 'json';
    //xhr.open('GET', 'https://webdev-api.loftschool.com/sendmail/fail'); //для отрицательного ответа
    xhr.open('POST', 'http://test.local/mail.php');   //для положительного ответа
    xhr.send(JSON.stringify(data));
    xhr.addEventListener('load', () => {
      
      if(xhr.status>=400) {
        let content = 'Ошибка, данные не отправлены, попробуйте позже';
        contentText.innerHTML = content;
      } else {
        if(xhr.response.status) {
          let content = 'Сообщение отправлено';
          contentText.innerHTML = content;
      } else {
          let content = 'Соединение с сервером не установлено';
          contentText.innerHTML = content;
      }
      }
    })
    
		let closeIcon = document.createElement("a");
		closeIcon.classList.add("popup__close-button");
		closeIcon.innerHTML = 'Закрыть';
		closeIcon.href = "#";
		closeIcon.addEventListener("click", (function(e){
			e.preventDefault();
			_closePopup(overlay);
    }));


		overlay.appendChild(popupWindow);
		popupWindow.appendChild(contentText);
		popupWindow.appendChild(closeIcon);
    document.body.appendChild(overlay);
  
	});

	let _closePopup = (function(overlay) {
		document.body.removeChild(overlay);
	});

	let addListeners = (function() {
    send.addEventListener('click', _ajaxInquiry)
	});

	return {
		init: addListeners
	}
});

formFunction({
	text: ".reviews__text"
}).init();


/*end form */

/* start burger__composition */
let isMobile = () => {
  let screen = document.documentElement.clientWidth;
	let mobile = false;
	if(screen<=768){
    mobile = true;
  } 
	return mobile;
};

let mobileComposition = () => {
		let buttonComposition = document.querySelector('.burger__composition');
		let buttonCloseComposition = document.querySelector('.dropdown__close');

		buttonCloseComposition.addEventListener('click', e => {
			e.preventDefault();

			buttonComposition.classList.remove('active');
		});
		buttonCloseComposition.addEventListener('touchstart', e => {
			e.preventDefault();

			buttonComposition.classList.remove('active');
		});

		if (isMobile) {
			buttonComposition.addEventListener('click', e => {
				buttonComposition.classList.add('active');
			});
		}
		buttonComposition.addEventListener('mouseenter', e => {
			buttonComposition.classList.add('active');
		});

		buttonComposition.addEventListener('mouseleave', e => {
			buttonComposition.classList.remove('active');
		});
	};
	mobileComposition();




/* end burger__composition*/


let slider = options => {
	let wrapper = document.querySelector(options.wrapper);
	let width = wrapper.clientWidth;
	wrapper.style.width = width  + 'px';
	let step = width;
	let list = document.querySelector(options.list);
	let items = document.querySelectorAll(options.item);

	let left = document.querySelector(options.left);
	let right = document.querySelector(options.right);

	items.forEach(element => {
		element.style.width = width  + 'px';
	});

	let positionMaxRight = width * (items.length - 1);

	let positionRight = 0;

	let _right = position => {
		if (position <= positionMaxRight) {
			positionRight = positionRight + step;
			list.style.right = positionRight + "px";
		}
	};

	let _left = position => {
		if (position >= 0) {
			positionRight = positionRight - step;
			list.style.right = positionRight + "px";
		}
	};

	let initial = () => {
		list.style.right = positionRight;

		right.addEventListener("click", e => {
			e.preventDefault();

			_right(positionRight + step);
		});

		left.addEventListener("click", e => {
			e.preventDefault();

			_left(positionRight - step);
		});

	};

	return {
		init: initial
	}
};

slider({
	wrapper: '.burger__wrapper',
	list: '.burger__list',
	item: '.burger__item',
	right: '.burger__arrows-item--right',
	left: '.burger__arrows-item--left'
}).init();



/*end slider*/
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJhcHAubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyogT3ZlcmxheSBtZW51ICovXHJcblxyXG4gIFxyXG4gIGxldCBtZW51ID0gKGZ1bmN0aW9uKG9wdGlvbnMpIHtcclxuXHJcbiAgICBsZXQgYnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihvcHRpb25zLmJ1dHRvbik7XHJcbiAgICBsZXQgbWVudSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Iob3B0aW9ucy5tZW51KTtcclxuICAgIGxldCBib2R5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpO1xyXG4gICAgbGV0IGxpbmsgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm92ZXJsYXktbWVudV9fbGlua1wiKTtcclxuICAgIFxyXG5cclxuXHJcblxyXG4gICAgbGV0IF90b2dnbGVNZW51ID0gZnVuY3Rpb24oZSkge1xyXG4gICAgICBidXR0b24uY2xhc3NMaXN0LnRvZ2dsZSgnaGFtYnVyZ2VyLWJhci0tYWN0aXZlJyk7XHJcbiAgICAgIG1lbnUuY2xhc3NMaXN0LnRvZ2dsZSgnb3ZlcmxheS0tb3BlbicpO1xyXG4gICAgICBib2R5LmNsYXNzTGlzdC50b2dnbGUoJ2JvZHktYWN0aXZlLW1lbnUnKTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgYWRkTGlzdGVuZXJzID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIF90b2dnbGVNZW51KTtcclxuICAgICAgICBmb3IgKGk9MDtpPGxpbmsubGVuZ3RoO2krKyl7XHJcbiAgICAgICAgICBsaW5rW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgX3RvZ2dsZU1lbnUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgb3Blbk1lbnU6IGFkZExpc3RlbmVyc1xyXG4gICAgICB9O1xyXG5cclxuICB9KSh7XHJcbiAgICBidXR0b246ICcjdG9nZ2xlJyxcclxuICAgIG1lbnU6ICcjb3ZlcmxheSdcclxuICB9KTtcclxuXHJcbiAgbWVudS5vcGVuTWVudSgpO1xyXG5cclxuXHJcbi8qZW5kIG92ZXJsYXkgbWVudSAqL1xyXG5cclxuLypBY2NvZGVvbiB0ZWFtKi9cclxubGV0IHRlYW1BY2NvcmRlb24gPSAoZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgbGV0IGxpbmtBY2NvcmRlb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYWNjb3JkZW9uX19saW5rJyk7XHJcbiAgICBcclxuICAgIGxldCBmb3JFYWNoQWNjb3JkZW9uID0gbGlua0FjY29yZGVvbi5mb3JFYWNoKGZ1bmN0aW9uKHBlcnNvbk5hbWUpIHtcclxuICAgIHBlcnNvbk5hbWUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICBsZXQgYWN0aXZlUGVyc29uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFjY29yZGVvbl9faXRlbS5hY2NvcmRlb25fX2l0ZW0tLWlzLWFjdGl2ZScpO1xyXG4gICAgICAgICAgaWYoYWN0aXZlUGVyc29uKSB7XHJcbiAgICAgICAgICAgIGxldCB0ZWFtQWNjb3JkZW9uRGV0YWlscyA9IGFjdGl2ZVBlcnNvbi5xdWVyeVNlbGVjdG9yKCcuYWNjb3JkZW9uLWNvbnRlbnQnKTtcclxuICAgICAgICAgICAgdGVhbUFjY29yZGVvbkRldGFpbHMuc3R5bGUuaGVpZ2h0ID0gXCJcIjtcclxuICAgICAgICAgICAgYWN0aXZlUGVyc29uLmNsYXNzTGlzdC5yZW1vdmUoJ2FjY29yZGVvbl9faXRlbS0taXMtYWN0aXZlJyk7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgaWYoIWFjdGl2ZVBlcnNvbiB8fCBhY3RpdmVQZXJzb24ubGlua0FjY29yZGVvbiAhPT0gdGhpcykge1xyXG4gICAgICAgICAgICBsZXQgY3VycmVudFBlcnNvbiA9IHRoaXMuY2xvc2VzdCgnLmFjY29yZGVvbl9faXRlbScpO1xyXG4gICAgICAgICAgICBjdXJyZW50UGVyc29uLmNsYXNzTGlzdC5hZGQoJ2FjY29yZGVvbl9faXRlbS0taXMtYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIGxldCBjdXJyZW50UGVyc29uSW5mbyA9IGN1cnJlbnRQZXJzb24ucXVlcnlTZWxlY3RvcignLmFjY29yZGVvbi1jb250ZW50Jyk7XHJcbiAgICAgICAgICAgIGN1cnJlbnRQZXJzb25JbmZvLnN0eWxlLmhlaWdodCA9IGN1cnJlbnRQZXJzb25JbmZvLnNjcm9sbEhlaWdodCArICdweCc7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH0pXHJcbiAgfSlcclxuXHJcbnRlYW1BY2NvcmRlb24oKTtcclxuLyplbmQgQWNjb3JkZW9uIHRlYW0gKi9cclxuXHJcbi8qIFN0YXJ0IGFjY29yZGVvbiBob3Jpem9udGFsICovXHJcbmxldCBtZW51QWNjb3JkZW9uID0gKGZ1bmN0aW9uKCkge1xyXG5cclxuICAgIGxldCBsaW5rTWVudUFjY29yZGVvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5hY2NvcmRlb24tbWVudV9fbGluaycpO1xyXG4gICAgbGV0IHVzZXJXaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xyXG4gICAgbGV0IGxpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWNjb3JkZW9uLW1lbnVfX2xpc3QnKTtcclxuICAgIGxldCBpdGVtc0xpc3QgPSBsaXN0LnF1ZXJ5U2VsZWN0b3JBbGwoJy5hY2NvcmRlb24tbWVudV9faXRlbScpO1xyXG5cdFx0bGV0IHRpdGxlSXRlbSA9IGxpc3QucXVlcnlTZWxlY3RvcignLmFjY29yZGVvbi1tZW51X19saW5rJyk7XHJcblx0XHRsZXQgd2lkdGhUaXRsZSA9IHRpdGxlSXRlbS5jbGllbnRXaWR0aDtcclxuXHRcdHZhciBuZWVkZWRXaWR0aCA9IHVzZXJXaWR0aCAtIGl0ZW1zTGlzdC5sZW5ndGggKiB3aWR0aFRpdGxlO1xyXG5cdFx0bmVlZGVkV2lkdGggPSAobmVlZGVkV2lkdGggPiA1MjApID8gJzUyMHB4JyA6IG5lZWRlZFdpZHRoICsgJ3B4JztcclxuICAgIFxyXG4gICAgbGV0IGZvckVhY2hNZW51QWNjb3JkZW9uID0gbGlua01lbnVBY2NvcmRlb24uZm9yRWFjaChmdW5jdGlvbihjYXRlZ29yeU5hbWUpIHtcclxuICAgIGNhdGVnb3J5TmFtZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgIGxldCBhY3RpdmVDYXRlZ29yeSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hY2NvcmRlb24tbWVudV9faXRlbS5hY2NvcmRlb24tbWVudV9faXRlbS0taXMtYWN0aXZlJyk7XHJcbiAgICAgICAgICBpZihhY3RpdmVDYXRlZ29yeSkge1xyXG4gICAgICAgICAgICBsZXQgbWVudUFjY29yZGVvbkRldGFpbHMgPSBhY3RpdmVDYXRlZ29yeS5xdWVyeVNlbGVjdG9yKCcuYWNjb3JkZW9uLW1lbnVfX2l0ZW0tY29udGVudCcpO1xyXG4gICAgICAgICAgICBtZW51QWNjb3JkZW9uRGV0YWlscy5zdHlsZS53aWR0aCA9IFwiXCI7XHJcbiAgICAgICAgICAgIGFjdGl2ZUNhdGVnb3J5LmNsYXNzTGlzdC5yZW1vdmUoJ2FjY29yZGVvbi1tZW51X19pdGVtLS1pcy1hY3RpdmUnKTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBpZighYWN0aXZlQ2F0ZWdvcnl8fCBhY3RpdmVDYXRlZ29yeS5saW5rTWVudUFjY29yZGVvbiAhPT0gdGhpcykge1xyXG4gICAgICAgICAgICBsZXQgY3VycmVudENhdGVnb3J5ID0gdGhpcy5jbG9zZXN0KCcuYWNjb3JkZW9uLW1lbnVfX2l0ZW0nKTtcclxuICAgICAgICAgICAgY3VycmVudENhdGVnb3J5LmNsYXNzTGlzdC5hZGQoJ2FjY29yZGVvbi1tZW51X19pdGVtLS1pcy1hY3RpdmUnKTtcclxuICAgICAgICAgICAgbGV0IGN1cnJlbnRDYXRlZ29yeUluZm8gPSBjdXJyZW50Q2F0ZWdvcnkucXVlcnlTZWxlY3RvcignLmFjY29yZGVvbi1tZW51X19pdGVtLWNvbnRlbnQnKTtcclxuICAgICAgICAgICAgY3VycmVudENhdGVnb3J5SW5mby5zdHlsZS53aWR0aCA9IG5lZWRlZFdpZHRoO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9KVxyXG4gIH0pXHJcblxyXG5tZW51QWNjb3JkZW9uKCk7XHJcblxyXG4vKkVuZCBhY2NvcmRlb24gaG9yaW56b250YWwgKi9cclxuXHJcblxyXG5cclxuLyogcG9wdXAgKi9cclxubGV0IHBvcHVwID0gKGZ1bmN0aW9uKG9wdGlvbnMpIHtcclxuXHRsZXQgd3JhcHBlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5yZXZpZXdzX19saXN0Jyk7XHJcblxyXG5cdGxldCBfdG9vZ2xlUG9wdXAgPSAoZnVuY3Rpb24oZSkge1xyXG5cdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuXHRcdGlmIChlLnRhcmdldC5jbGFzc05hbWUgPT0gb3B0aW9ucy5idXR0b24pIHtcclxuXHRcdFx0X29wZW5Qb3B1cChlLnRhcmdldCk7XHJcblx0XHR9XHJcblx0fSk7XHJcblxyXG5cdGxldCBfb3BlblBvcHVwID0gKGZ1bmN0aW9uKGJ1dHRvbil7XHJcblx0XHRsZXQgb3ZlcmxheSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5cdFx0b3ZlcmxheS5jbGFzc0xpc3QuYWRkKCdvdmVybGF5Jyk7XHJcblxyXG5cdFx0bGV0IHBvcHVwV2luZG93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcblx0XHRwb3B1cFdpbmRvdy5jbGFzc0xpc3QuYWRkKCdwb3B1cCcpO1xyXG5cclxuXHRcdGxldCBjb250ZW50VGV4dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5cdFx0Y29udGVudFRleHQuY2xhc3NMaXN0LmFkZCgncG9wdXBfX2NvbnRlbnQnKTtcclxuXHJcblx0XHRsZXQgY29udGVudCA9IGJ1dHRvbi5wYXJlbnROb2RlO1xyXG5cclxuXHRcdGxldCB0ZXh0ID0gY29udGVudC5xdWVyeVNlbGVjdG9yKG9wdGlvbnMudGV4dCkudGV4dENvbnRlbnQ7XHJcblx0IFxyXG5cclxuXHRcdGxldCB0aXRsZUl0ZW09IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5cdFx0dGl0bGVJdGVtLmNsYXNzTGlzdC5hZGQoJ3BvcHVwX190aXRsZScpO1xyXG5cclxuICAgIGxldCB0aXRsZSA9IGNvbnRlbnQucXVlcnlTZWxlY3RvcihvcHRpb25zLnRpdGxlKS50ZXh0Q29udGVudDtcclxuICAgIGNvbnRlbnRUZXh0LmlubmVySFRNTCA9ICfQntGI0LjQsdC60LAg0L7RgtC/0YDQsNCy0LrQuCDQtNCw0L3QvdGL0YUnO1xyXG4gICAgY29udGVudFRleHQuaW5uZXJIVE1MID0gdGV4dDtcclxuICAgIHRpdGxlSXRlbS5pbm5lckhUTUwgPSB0aXRsZTtcclxuXHJcblx0XHRsZXQgY2xvc2VJY29uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIik7XHJcblx0XHRjbG9zZUljb24uY2xhc3NMaXN0LmFkZChcInBvcHVwX19jbG9zZVwiKTtcclxuXHRcdGNsb3NlSWNvbi5pbm5lckhUTUwgPSAnPHN2ZyBjbGFzcz1cInBvcHVwX19jbG9zZS1pbWFnZVwiPjx1c2UgeGxpbms6aHJlZj1cIi4vaW1hZ2VzL2ljb25zL3Nwcml0ZS5zdmcjY2xvc2VcIj48L3VzZT48L3N2Zz4nO1xyXG5cdFx0Y2xvc2VJY29uLmhyZWYgPSBcIiNcIjtcclxuXHRcdGNsb3NlSWNvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGZ1bmN0aW9uKGUpe1xyXG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdF9jbG9zZVBvcHVwKG92ZXJsYXkpO1xyXG5cdFx0fSkpO1xyXG5cclxuXHRcdG92ZXJsYXkuYXBwZW5kQ2hpbGQocG9wdXBXaW5kb3cpO1xyXG5cdFx0cG9wdXBXaW5kb3cuYXBwZW5kQ2hpbGQodGl0bGVJdGVtKTtcclxuXHRcdHBvcHVwV2luZG93LmFwcGVuZENoaWxkKGNvbnRlbnRUZXh0KTtcclxuXHRcdHBvcHVwV2luZG93LmFwcGVuZENoaWxkKGNsb3NlSWNvbik7XHJcblxyXG5cdFx0ZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChvdmVybGF5KTtcclxuXHR9KTtcclxuXHJcblx0bGV0IF9jbG9zZVBvcHVwID0gKGZ1bmN0aW9uKG92ZXJsYXkpIHtcclxuXHRcdGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQob3ZlcmxheSk7XHJcblx0fSk7XHJcblxyXG5cdGxldCBhZGRMaXN0ZW5lcnMgPSAoZnVuY3Rpb24oKSB7XHJcblx0XHR3cmFwcGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgX3Rvb2dsZVBvcHVwKVxyXG5cdH0pO1xyXG5cclxuXHRyZXR1cm4ge1xyXG5cdFx0aW5pdDogYWRkTGlzdGVuZXJzXHJcblx0fVxyXG59KTtcclxuXHJcbnBvcHVwKHtcclxuXHRidXR0b246IFwicmV2aWV3c19fYnV0dG9uXCIsXHJcblx0dGl0bGU6IFwiLnJldmlld3NfX3RpdGxlXCIsXHJcblx0dGV4dDogXCIucmV2aWV3c19fdGV4dFwiXHJcbn0pLmluaXQoKTtcclxuXHJcblxyXG4vKiBlbmQgcG9wdXAgKi9cclxuXHJcbi8qIGZvcm0qL1xyXG5cclxubGV0IGZvcm1GdW5jdGlvbiA9IChmdW5jdGlvbihvcHRpb25zKSB7XHJcblxyXG4gIGNvbnN0IG15Rm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNteUZvcm0nKTtcclxuICBjb25zdCBzZW5kID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NlbmQnKTtcclxuICBjb25zdCBkYXRhID0ge1xyXG4gICAgbmFtZTogbXlGb3JtLmVsZW1lbnRzLm5hbWUudmFsdWUsXHJcbiAgICBwaG9uZTogbXlGb3JtLmVsZW1lbnRzLnBob25lLnZhbHVlLFxyXG4gICAgY29tbWVudDogbXlGb3JtLmVsZW1lbnRzLmNvbW1lbnQudmFsdWUsXHJcbiAgICB0bzogXCJzZWdlem11bmRvdm5hQGdtYWlsLmNvbVwiXHJcbiAgfTtcclxuXHJcblx0bGV0IF9hamF4SW5xdWlyeSA9IChmdW5jdGlvbihlKXtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdGxldCBvdmVybGF5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcblx0XHRvdmVybGF5LmNsYXNzTGlzdC5hZGQoJ292ZXJsYXknKTtcclxuXHRcdGxldCBwb3B1cFdpbmRvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5cdFx0cG9wdXBXaW5kb3cuY2xhc3NMaXN0LmFkZCgncG9wdXAtLWZvcm0nKTtcclxuXHRcdGxldCBjb250ZW50VGV4dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5cdFx0Y29udGVudFRleHQuY2xhc3NMaXN0LmFkZCgncG9wdXBfX2NvbnRlbnQnKTtcclxuXHJcbiAgICBjb25zdCB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICAgIHhoci5yZXNwb25zZVR5cGUgPSAnanNvbic7XHJcbiAgICAvL3hoci5vcGVuKCdHRVQnLCAnaHR0cHM6Ly93ZWJkZXYtYXBpLmxvZnRzY2hvb2wuY29tL3NlbmRtYWlsL2ZhaWwnKTsgLy/QtNC70Y8g0L7RgtGA0LjRhtCw0YLQtdC70YzQvdC+0LPQviDQvtGC0LLQtdGC0LBcclxuICAgIHhoci5vcGVuKCdQT1NUJywgJ2h0dHA6Ly90ZXN0LmxvY2FsL21haWwucGhwJyk7ICAgLy/QtNC70Y8g0L/QvtC70L7QttC40YLQtdC70YzQvdC+0LPQviDQvtGC0LLQtdGC0LBcclxuICAgIHhoci5zZW5kKEpTT04uc3RyaW5naWZ5KGRhdGEpKTtcclxuICAgIHhoci5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgKCkgPT4ge1xyXG4gICAgICBcclxuICAgICAgaWYoeGhyLnN0YXR1cz49NDAwKSB7XHJcbiAgICAgICAgbGV0IGNvbnRlbnQgPSAn0J7RiNC40LHQutCwLCDQtNCw0L3QvdGL0LUg0L3QtSDQvtGC0L/RgNCw0LLQu9C10L3Riywg0L/QvtC/0YDQvtCx0YPQudGC0LUg0L/QvtC30LbQtSc7XHJcbiAgICAgICAgY29udGVudFRleHQuaW5uZXJIVE1MID0gY29udGVudDtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBpZih4aHIucmVzcG9uc2Uuc3RhdHVzKSB7XHJcbiAgICAgICAgICBsZXQgY29udGVudCA9ICfQodC+0L7QsdGJ0LXQvdC40LUg0L7RgtC/0YDQsNCy0LvQtdC90L4nO1xyXG4gICAgICAgICAgY29udGVudFRleHQuaW5uZXJIVE1MID0gY29udGVudDtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGxldCBjb250ZW50ID0gJ9Ch0L7QtdC00LjQvdC10L3QuNC1INGBINGB0LXRgNCy0LXRgNC+0Lwg0L3QtSDRg9GB0YLQsNC90L7QstC70LXQvdC+JztcclxuICAgICAgICAgIGNvbnRlbnRUZXh0LmlubmVySFRNTCA9IGNvbnRlbnQ7XHJcbiAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSlcclxuICAgIFxyXG5cdFx0bGV0IGNsb3NlSWNvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpO1xyXG5cdFx0Y2xvc2VJY29uLmNsYXNzTGlzdC5hZGQoXCJwb3B1cF9fY2xvc2UtYnV0dG9uXCIpO1xyXG5cdFx0Y2xvc2VJY29uLmlubmVySFRNTCA9ICfQl9Cw0LrRgNGL0YLRjCc7XHJcblx0XHRjbG9zZUljb24uaHJlZiA9IFwiI1wiO1xyXG5cdFx0Y2xvc2VJY29uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZnVuY3Rpb24oZSl7XHJcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0X2Nsb3NlUG9wdXAob3ZlcmxheSk7XHJcbiAgICB9KSk7XHJcblxyXG5cclxuXHRcdG92ZXJsYXkuYXBwZW5kQ2hpbGQocG9wdXBXaW5kb3cpO1xyXG5cdFx0cG9wdXBXaW5kb3cuYXBwZW5kQ2hpbGQoY29udGVudFRleHQpO1xyXG5cdFx0cG9wdXBXaW5kb3cuYXBwZW5kQ2hpbGQoY2xvc2VJY29uKTtcclxuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQob3ZlcmxheSk7XHJcbiAgXHJcblx0fSk7XHJcblxyXG5cdGxldCBfY2xvc2VQb3B1cCA9IChmdW5jdGlvbihvdmVybGF5KSB7XHJcblx0XHRkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKG92ZXJsYXkpO1xyXG5cdH0pO1xyXG5cclxuXHRsZXQgYWRkTGlzdGVuZXJzID0gKGZ1bmN0aW9uKCkge1xyXG4gICAgc2VuZC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIF9hamF4SW5xdWlyeSlcclxuXHR9KTtcclxuXHJcblx0cmV0dXJuIHtcclxuXHRcdGluaXQ6IGFkZExpc3RlbmVyc1xyXG5cdH1cclxufSk7XHJcblxyXG5mb3JtRnVuY3Rpb24oe1xyXG5cdHRleHQ6IFwiLnJldmlld3NfX3RleHRcIlxyXG59KS5pbml0KCk7XHJcblxyXG5cclxuLyplbmQgZm9ybSAqL1xyXG5cclxuLyogc3RhcnQgYnVyZ2VyX19jb21wb3NpdGlvbiAqL1xyXG5sZXQgaXNNb2JpbGUgPSAoKSA9PiB7XHJcbiAgbGV0IHNjcmVlbiA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aDtcclxuXHRsZXQgbW9iaWxlID0gZmFsc2U7XHJcblx0aWYoc2NyZWVuPD03Njgpe1xyXG4gICAgbW9iaWxlID0gdHJ1ZTtcclxuICB9IFxyXG5cdHJldHVybiBtb2JpbGU7XHJcbn07XHJcblxyXG5sZXQgbW9iaWxlQ29tcG9zaXRpb24gPSAoKSA9PiB7XHJcblx0XHRsZXQgYnV0dG9uQ29tcG9zaXRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnVyZ2VyX19jb21wb3NpdGlvbicpO1xyXG5cdFx0bGV0IGJ1dHRvbkNsb3NlQ29tcG9zaXRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZHJvcGRvd25fX2Nsb3NlJyk7XHJcblxyXG5cdFx0YnV0dG9uQ2xvc2VDb21wb3NpdGlvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xyXG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG5cdFx0XHRidXR0b25Db21wb3NpdGlvbi5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcclxuXHRcdH0pO1xyXG5cdFx0YnV0dG9uQ2xvc2VDb21wb3NpdGlvbi5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgZSA9PiB7XHJcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcblx0XHRcdGJ1dHRvbkNvbXBvc2l0aW9uLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0aWYgKGlzTW9iaWxlKSB7XHJcblx0XHRcdGJ1dHRvbkNvbXBvc2l0aW9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7XHJcblx0XHRcdFx0YnV0dG9uQ29tcG9zaXRpb24uY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cdFx0YnV0dG9uQ29tcG9zaXRpb24uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsIGUgPT4ge1xyXG5cdFx0XHRidXR0b25Db21wb3NpdGlvbi5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdGJ1dHRvbkNvbXBvc2l0aW9uLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCBlID0+IHtcclxuXHRcdFx0YnV0dG9uQ29tcG9zaXRpb24uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XHJcblx0XHR9KTtcclxuXHR9O1xyXG5cdG1vYmlsZUNvbXBvc2l0aW9uKCk7XHJcblxyXG5cclxuXHJcblxyXG4vKiBlbmQgYnVyZ2VyX19jb21wb3NpdGlvbiovXHJcblxyXG5cclxubGV0IHNsaWRlciA9IG9wdGlvbnMgPT4ge1xyXG5cdGxldCB3cmFwcGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihvcHRpb25zLndyYXBwZXIpO1xyXG5cdGxldCB3aWR0aCA9IHdyYXBwZXIuY2xpZW50V2lkdGg7XHJcblx0d3JhcHBlci5zdHlsZS53aWR0aCA9IHdpZHRoICArICdweCc7XHJcblx0bGV0IHN0ZXAgPSB3aWR0aDtcclxuXHRsZXQgbGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Iob3B0aW9ucy5saXN0KTtcclxuXHRsZXQgaXRlbXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKG9wdGlvbnMuaXRlbSk7XHJcblxyXG5cdGxldCBsZWZ0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihvcHRpb25zLmxlZnQpO1xyXG5cdGxldCByaWdodCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Iob3B0aW9ucy5yaWdodCk7XHJcblxyXG5cdGl0ZW1zLmZvckVhY2goZWxlbWVudCA9PiB7XHJcblx0XHRlbGVtZW50LnN0eWxlLndpZHRoID0gd2lkdGggICsgJ3B4JztcclxuXHR9KTtcclxuXHJcblx0bGV0IHBvc2l0aW9uTWF4UmlnaHQgPSB3aWR0aCAqIChpdGVtcy5sZW5ndGggLSAxKTtcclxuXHJcblx0bGV0IHBvc2l0aW9uUmlnaHQgPSAwO1xyXG5cclxuXHRsZXQgX3JpZ2h0ID0gcG9zaXRpb24gPT4ge1xyXG5cdFx0aWYgKHBvc2l0aW9uIDw9IHBvc2l0aW9uTWF4UmlnaHQpIHtcclxuXHRcdFx0cG9zaXRpb25SaWdodCA9IHBvc2l0aW9uUmlnaHQgKyBzdGVwO1xyXG5cdFx0XHRsaXN0LnN0eWxlLnJpZ2h0ID0gcG9zaXRpb25SaWdodCArIFwicHhcIjtcclxuXHRcdH1cclxuXHR9O1xyXG5cclxuXHRsZXQgX2xlZnQgPSBwb3NpdGlvbiA9PiB7XHJcblx0XHRpZiAocG9zaXRpb24gPj0gMCkge1xyXG5cdFx0XHRwb3NpdGlvblJpZ2h0ID0gcG9zaXRpb25SaWdodCAtIHN0ZXA7XHJcblx0XHRcdGxpc3Quc3R5bGUucmlnaHQgPSBwb3NpdGlvblJpZ2h0ICsgXCJweFwiO1xyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdGxldCBpbml0aWFsID0gKCkgPT4ge1xyXG5cdFx0bGlzdC5zdHlsZS5yaWdodCA9IHBvc2l0aW9uUmlnaHQ7XHJcblxyXG5cdFx0cmlnaHQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGUgPT4ge1xyXG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG5cdFx0XHRfcmlnaHQocG9zaXRpb25SaWdodCArIHN0ZXApO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0bGVmdC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZSA9PiB7XHJcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcblx0XHRcdF9sZWZ0KHBvc2l0aW9uUmlnaHQgLSBzdGVwKTtcclxuXHRcdH0pO1xyXG5cclxuXHR9O1xyXG5cclxuXHRyZXR1cm4ge1xyXG5cdFx0aW5pdDogaW5pdGlhbFxyXG5cdH1cclxufTtcclxuXHJcbnNsaWRlcih7XHJcblx0d3JhcHBlcjogJy5idXJnZXJfX3dyYXBwZXInLFxyXG5cdGxpc3Q6ICcuYnVyZ2VyX19saXN0JyxcclxuXHRpdGVtOiAnLmJ1cmdlcl9faXRlbScsXHJcblx0cmlnaHQ6ICcuYnVyZ2VyX19hcnJvd3MtaXRlbS0tcmlnaHQnLFxyXG5cdGxlZnQ6ICcuYnVyZ2VyX19hcnJvd3MtaXRlbS0tbGVmdCdcclxufSkuaW5pdCgpO1xyXG5cclxuXHJcblxyXG4vKmVuZCBzbGlkZXIqLyJdfQ==
